<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title></title>
<script type="text/javascript" src="grey.js?7a946ecce2241be66b60"></script></head>
<body>
  <script>
    var protocol = location.protocol === 'file:' ? 'http:' : location.protocol
    var stableKISSY = protocol + '//g.alicdn.com/kissy/k/1.4.0/seed-min.js'
    var greyKISSY = protocol + '//g.alicdn.com/kissy/k/1.4.2/seed-min.js'
    var log = function(msg, data) {
      if (window.console && console.log) {
        console.log(msg, data)
      } else {
        alert(msg + ' : ' + JSON.stringify(data))
      }
    }

    grey({
      stable: {
        url: stableKISSY,
        key: 'key-stable',
        hash: '1.4.0'
      },
      grey: {
        url: greyKISSY,
        key: 'key-grey',
        hash: '1.4.2'
      },
      hash: function(code) {
        // console.log('hash', code)
        return /v1\.40/.test(code) ? '1.4.0' : '1.4.2'
      },

      before: function(params) {
        log('before', params)
      },
      after: function(params) {
        log('after', params)
      },

      ratio: 50,
      base: 100
    })
  </script>
</body>
</html>